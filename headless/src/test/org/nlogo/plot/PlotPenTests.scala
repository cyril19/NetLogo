// (C) Uri Wilensky. https://github.com/NetLogo/NetLogo

package org.nlogo.plot

class PlotPenTests extends SimplePlotTest {

  test("PlotModeConstants") {
    assert(PlotPen.isValidPlotPenMode(PlotPen.LineMode))
    assert(PlotPen.isValidPlotPenMode(PlotPen.BarMode))
    assert(PlotPen.isValidPlotPenMode(PlotPen.PointMode))
    assert(!PlotPen.isValidPlotPenMode(-1))
    assert(!PlotPen.isValidPlotPenMode(3))
  }
  testPlot("Constructor") { plot =>
    val pen0 = plot.createPlotPen("test", true)
    assert(pen0.temporary)
    val pen = plot.createPlotPen("test", false)
    expect("test")(pen.name)
    assert(!pen.temporary)
    expect(java.awt.Color.BLACK.getRGB)(pen.color)
    assert(pen.isDown)
    expect(0.0)(pen.x)
    expect(PlotPen.LineMode)(pen.mode)
    expect(1.0)(pen.interval)
    expect(0)(pen.points.size)
    assert(pen.inLegend)
  }
  testPlot("ResetOfPermanentPen") { plot =>
    val pen = plot.createPlotPen("test", false)
    expect(0.0)(pen.x)
    pen.plot(100)
    pen.plot(200)
    expect(1.0)(pen.x)
    pen.isDown = false
    assert(!pen.isDown)
    pen.plot(12.3)
    expect(3)(pen.points.size)
    pen.color = java.awt.Color.GREEN.getRGB
    pen.mode = PlotPen.BarMode
    pen.softReset()
    assert(pen.isDown)
    expect(0.0)(pen.x)
    expect(0)(pen.points.size)
    expect(java.awt.Color.GREEN.getRGB)(pen.color)
    expect(PlotPen.BarMode)(pen.mode)
    pen.hardReset()
    expect(java.awt.Color.BLACK.getRGB)(pen.color)
    expect(PlotPen.LineMode)(pen.mode)
  }
  testPlot("ResetOfTemporaryPen") { plot =>
    val pen = plot.createPlotPen("test", true)
    expect(0.0)(pen.x)
    pen.plot(100)
    pen.plot(200)
    expect(1.0)(pen.x)
    pen.isDown = false
    assert(!pen.isDown)
    pen.plot(12.3)
    expect(3)(pen.points.size)
    pen.color = java.awt.Color.GREEN.getRGB
    pen.mode = PlotPen.BarMode
    pen.softReset()
    assert(pen.isDown)
    expect(0.0)(pen.x)
    expect(0)(pen.points.size)
    expect(java.awt.Color.GREEN.getRGB)(pen.color)
    expect(PlotPen.BarMode)(pen.mode)
    pen.hardReset()
    expect(java.awt.Color.GREEN.getRGB)(pen.color)
    expect(PlotPen.BarMode)(pen.mode)
  }
  testPlot("PlotOfOneArg") { plot =>
    val pen = plot.createPlotPen("test", true)
    pen.interval = 1.5
    pen.plot(5.0)
    expect(0.0)(pen.x)
    pen.plot(7.5)
    pen.interval = 2.5
    pen.plot(9.0)
    expect(3)(pen.points.size)
    expect(0.0)(pen.points(0).x)
    expect(1.5)(pen.points(1).x)
    expect(4.0)(pen.points(2).x)
    expect(5.0)(pen.points(0).y)
    expect(7.5)(pen.points(1).y)
    expect(9.0)(pen.points(2).y)
    expect(4.0)(pen.x)
  }
  testPlot("PlotOfTwoArgs") { plot =>
    val pen = plot.createPlotPen("test", true)
    pen.color = java.awt.Color.GREEN.getRGB
    expect(0.0)(pen.x)
    pen.plot(1.5, 2.5)
    expect(1.5)(pen.x)
    pen.isDown = false
    pen.color = java.awt.Color.RED.getRGB
    pen.plot(3.5, 4.5)
    expect(3.5)(pen.x)
    expect(2)(pen.points.size)
    expect(1.5)(pen.points(0).x)
    expect(3.5)(pen.points(1).x)
    expect(2.5)(pen.points(0).y)
    expect(4.5)(pen.points(1).y)
    assert(pen.points(0).isDown)
    assert(!pen.points(1).isDown)
    expect(java.awt.Color.GREEN.getRGB)(pen.points(0).color)
    expect(java.awt.Color.RED.getRGB)(pen.points(1).color)
  }
}
